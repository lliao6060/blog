import{i as t,o,c,a as n,k as a,l,F as r,b as s,g as i}from"./app.e710a6d8.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const k={},m=n("h1",{id:"pinia\u5165\u9580",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pinia\u5165\u9580","aria-hidden":"true"},"#"),s(" Pinia\u5165\u9580")],-1),d=n("h6",{id:"tags-pinia",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tags-pinia","aria-hidden":"true"},"#"),s(" tags: "),n("code",null,"pinia")],-1),b=n("p",null,"\u53C3\u8003",-1),h=s("Pinia - Vuex \u7684\u5F8C\u7E7C\u8005"),g={href:"https://blog.csdn.net/wx_15896014638/article/details/118931645?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164724218316780274111752%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=164724218316780274111752&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-118931645.article_score_rank&utm_term=Pinia&spm=1018.2226.3001.4187",target:"_blank",rel:"noopener noreferrer"},_=s("Pinia \u5FEB\u901F\u5165\u9580"),f={href:"https://blog.csdn.net/weixin_42232622/article/details/122811173?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_antiscanv2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_antiscanv2&utm_relevant_index=2",target:"_blank",rel:"noopener noreferrer"},v=s("\u9084\u5728\u7528vuex\u55CE\uFF0Cpinia(\u83E0\u863F\u982D)\u624D\u9999"),y={href:"https://juejin.cn/post/7063376847198748702",target:"_blank",rel:"noopener noreferrer"},x=s("\u62E5\u62B1pinia\uFF0C\u5FEB\u901F\u4E0A\u624B\uFF0C\u8BE6\u89E3\u6307\u5357"),w=i(`<h2 id="vuex4\u7F3A\u9EDE" tabindex="-1"><a class="header-anchor" href="#vuex4\u7F3A\u9EDE" aria-hidden="true">#</a> vuex4\u7F3A\u9EDE</h2><ul><li>\u6539\u8B8A\u4E00\u500B<code>state</code>\u7684\u503C\uFF0C\u5982\u679C\u662F\u66F4\u65B0\u9700\u8981\u5B9A\u7FA9<code>mutations</code>\u548C<code>actions</code>\uFF0C\u4E26\u4E14\u4F7F\u7528<code>dispatch</code>\u8ABF\u7528</li><li>==\u6DFB\u52A0typescript\u9700\u8981\u81EA\u5B9A\u7FA9\u5FA9\u96DC\u7684\u985E\u578B\u4F86\u652F\u6301ts==</li><li>\u60F3\u628Astate\u5206\u6210\u591A\u500B\u90E8\u5206\uFF0C\u5C31\u9700\u8981\u7528\u5230 module(\u5B9A\u7FA9module\u5F88\u9EBB\u7169)</li><li>\u5F9Evue3\u958B\u59CB\u3002 <code>getters</code>\u7684\u7D50\u679C\u4E0D\u6703\u50CF\u8A08\u7B97\u5C6C\u6027\u90A3\u6A23\u7DE9\u5B58\u4E86</li><li>\u6A21\u584A\u9593\u56B4\u91CD\u5D4C\u5957</li></ul><h2 id="pinia\u512A\u9EDE" tabindex="-1"><a class="header-anchor" href="#pinia\u512A\u9EDE" aria-hidden="true">#</a> Pinia\u512A\u9EDE</h2><ul><li>\u5B8C\u6574\u7684 <code>TypeScript</code> \u652F\u6301\uFF1B\u5929\u751F\u5177\u5099\u5B8C\u7F8E\u7684\u985E\u578B\u63A8\u65B7</li><li>\u652F\u6301\u5169\u7A2E\u8A9E\u6CD5\u5275\u5EFA Store\uFF1AOptions Api \u548C Composition Api</li><li>\u53EF\u4EE5\u69CB\u5EFA\u591A\u500Bstore\uFF0C\u6253\u5305\u7BA1\u7406\u6703\u81EA\u52D5\u62C6\u5206</li><li><strong>\u6A21\u584A\u5316\u7684\u8A2D\u8A08</strong>\uFF0C\u4FBF\u65BC\u62C6\u5206\u72C0\u614B\uFF0C\u80FD\u5F88\u597D\u652F\u6301\u4EE3\u78BC\u5206\u5272\uFF1B</li><li>\u6C92\u6709\u5D4C\u5957\u7684\u6A21\u584A\uFF0C\u53EF\u4EE5\u8072\u660E\u591A\u500BStore\uFF0C\u4E14\u4ECD\u7136\u80FD\u5920\u5728\u5B58\u5132\u7A7A\u9593\u4E4B\u9593\u9032\u884C\u4EA4\u53C9\u7D44\u5408</li><li>\u6C92\u6709\u547D\u540D\u7A7A\u9593\u7684\u6A21\u584A <code>namespaced</code>\u6A21\u584A\uFF0C\u6216\u8005\u8AAA\u6240\u6709\u7684store\u90FD\u662F\u7368\u7ACB\u7684<code>module</code></li><li>\u8F15\u5DE7\uFF0C \u50C5\u6709 1 KB</li><li>\u652F\u6301Vue DevTools\uFF0C SSR\u548CWebpack \u4EE3\u78BC\u62C6\u5206</li><li>\u7121\u8AD6\u662FVue2\u6216\u662FVue3\u90FD\u53EF\u4EE5\u4F7F\u7528\uFF0C<strong>\u4E14\u4E0D\u4E00\u5B9A\u8981\u8207 Composition API \u4E00\u8D77\u4F7F\u7528</strong>\uFF0CAPI \u7684\u4F7F\u7528\u65B9\u5F0F\u5728\u5169\u8005\u4E2D\u4E5F\u662F\u4FDD\u6301\u4E00\u81F4\u7684\u3002</li></ul><h2 id="pinia-vs-vuex" tabindex="-1"><a class="header-anchor" href="#pinia-vs-vuex" aria-hidden="true">#</a> Pinia vs. Vuex</h2><ul><li>\u79FB\u9664 Mutations</li><li>Typescript \u4E0D\u518D\u9700\u8981\u591A\u9918\u7684 types \u4F86\u5305\u88DD</li><li>\u4E0D\u518D\u9700\u8981\u5F15\u5165\u5404\u7A2E magic string\uFF0C\u76F4\u63A5\u5F15\u5165\u51FD\u6578\uFF0C\u4EAB\u53D7\u81EA\u52D5\u88DC\u5168\u5E36\u4F86\u7684\u5FEB\u6A02</li><li>\u4E0D\u518D\u9700\u8981\u52D5\u614B\u8A3B\u518A\u6A21\u7D44\uFF0C\u9810\u8A2D\u90FD\u662F\u52D5\u614B\u8A3B\u518A</li><li>\u62CB\u68C4 Nested Module(\u5DE2\u72C0module)</li><li>\u7121\u75DB\u7522store module</li></ul><h3 id="install" tabindex="-1"><a class="header-anchor" href="#install" aria-hidden="true">#</a> install</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yarn add pinia
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u5275\u5EFAstore" tabindex="-1"><a class="header-anchor" href="#\u5275\u5EFAstore" aria-hidden="true">#</a> \u5275\u5EFAstore</h3><p>in store/index.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u5275\u5EFA pinia</span>
<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> pinia<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>in main.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">&#39;./store&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u7D81\u5B9A pinia \u5230 app</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="\u5275\u5EFAmodule" tabindex="-1"><a class="header-anchor" href="#\u5275\u5EFAmodule" aria-hidden="true">#</a> \u5275\u5EFAmodule</h3><p>\u5F15\u5165 defineStore \u65B9\u6CD5\uFF0COptions \u8207 Vuex \u9664\u4E86 mutations \u4EE5\u5916\u57FA\u672C\u76F8\u540C\uFF0C\u5305\u542B state, getters, actions</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u9019\u908A defineStore \u6703\u81EA\u52D5\u52D5\u614B\u8A3B\u518A\u6A21\u7D44\uFF0C\u56DE\u50B3\u503C\u70BA hook function</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useDemoStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;Main&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6CE8\u610F state \u662F\u4E00\u500B function\uFF0C\u63A8\u85A6\u4F7F\u7528 arrow function</span>
  <span class="token comment">// \u53EF\u5E6B\u52A9 typescript \u66F4\u597D\u9032\u884C\u985E\u578B\u63A8\u65B7</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
      <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">countTotal</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count <span class="token operator">*</span> state<span class="token punctuation">.</span>quantity
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">countChange</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token string">&#39;action\u4E2D\u7684\u53C3\u6578&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">++</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>quantity <span class="token operator">++</span>
      <span class="token comment">//or</span>
      <span class="token comment">// this.$patch({})</span>
      <span class="token comment">// this.$patch(state =&gt; {})</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="\u5728\u7D44\u4EF6\u4E2D\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5728\u7D44\u4EF6\u4E2D\u4F7F\u7528" aria-hidden="true">#</a> \u5728\u7D44\u4EF6\u4E2D\u4F7F\u7528</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//app.vue</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useDemoStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/main.js&#39;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> storeToRefs<span class="token punctuation">,</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> demoStore <span class="token operator">=</span> <span class="token function">useDemoStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> countChange <span class="token punctuation">}</span> <span class="token operator">=</span> demoStore
  <span class="token comment">//\u53EF\u4EE5\u9019\u6A23\u62FF(\u89E3\u69CB)</span>
  <span class="token comment">// const { count, quantity, countTotal } = storeToRefs(demoStore)</span>


  <span class="token comment">//\u4E5F\u53EF\u4EE5\u50CF\u662Fvuex\u4E00\u6A23\u7684\u62FF\u6CD5</span>
  <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span>useDemoStore<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;count&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;quantity&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;countTotal&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">//\u4FEE\u6539state\u4E2D\u7684\u6578\u64DA</span>
  <span class="token keyword">const</span> <span class="token function-variable function">demoStoreChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    demoStore<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
      state<span class="token punctuation">.</span>quantity<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">//\u908F\u8F2F\u8F03\u591A\u6642 \u53EF\u4EE5\u5BEB\u5728actions\u88E1 \u76F4\u63A5\u8ABF\u7528</span>
    <span class="token comment">// countChange()</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">//in html\u8A18\u5F97\u8981\u7528demoStore\u53BB\u62FF\u88E1\u9762\u7684\u6771\u897F</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>count<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> demoStore<span class="token punctuation">.</span>count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>quantity<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> demoStore<span class="token punctuation">.</span>quantity <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>count total<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> demoStore<span class="token punctuation">.</span>countTotal <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div>`,18);function S(j,T){const e=t("RouterLink"),p=t("ExternalLinkIcon");return o(),c(r,null,[m,d,b,n("ul",null,[n("li",null,[a(e,{to:"/post/Vue/Store/(https:/johnnywang1994.github.io/book/articles/js/pinia-intro.html#install)"},{default:l(()=>[h]),_:1})]),n("li",null,[n("a",g,[_,a(p)])]),n("li",null,[n("a",f,[v,a(p)])]),n("li",null,[n("a",y,[x,a(p)])])]),w],64)}var C=u(k,[["render",S]]);export{C as default};
