import{i as e,o,c,a as n,k as p,F as l,g as t,b as s}from"./app.9bcd07e9.js";import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";const u={},i=t('<h1 id="vue2\u76F8\u95DC\u7528\u6CD5\u5927\u5168" tabindex="-1"><a class="header-anchor" href="#vue2\u76F8\u95DC\u7528\u6CD5\u5927\u5168" aria-hidden="true">#</a> Vue2\u76F8\u95DC\u7528\u6CD5\u5927\u5168</h1><h6 id="tags-vue-vue-js-vue2-vue-router" tabindex="-1"><a class="header-anchor" href="#tags-vue-vue-js-vue2-vue-router" aria-hidden="true">#</a> tags: <code>vue</code> <code>vue.js</code> <code>vue2</code> <code>vue-router</code></h6><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch" aria-hidden="true">#</a> watch</h3>',3),k={href:"https://medium.com/unalai/%E8%AA%8D%E8%AD%98-vue-js-watch-%E7%9B%A3%E8%81%BD%E5%99%A8-ffee991368be",target:"_blank",rel:"noopener noreferrer"},d=s("watch\u76E3\u807D\u5668\u8A73\u89E3"),b=n("img",{src:"https://i.imgur.com/gA4ZJFK.png",alt:""},null,-1),m=t(`<p>==\u91CD\u9EDE==</p><h4 id="handler" tabindex="-1"><a class="header-anchor" href="#handler" aria-hidden="true">#</a> handler</h4><ul><li>\u653E\u5165\u6211\u5011\u9700\u8981\u8655\u7406\u7684\u7A0B\u5E8F\u3002</li></ul><h4 id="deep" tabindex="-1"><a class="header-anchor" href="#deep" aria-hidden="true">#</a> deep</h4><ul><li>\u7576\u6B32\u89C0\u5BDF\u503C\u7684\u7279\u6027\u70BA call by reference\uFF0C \u4F8B\u5982 ++Object \u6642\uFF0C\u9700\u5C07 deep \u503C\u8A2D\u5B9A\u70BA true++\uFF0C <strong>\u544A\u77E5 watch \u9700\u8981\u6DF1\u5EA6\u89C0\u5BDF</strong>\u3002++\u5426\u5247\u6703\u56E0\u70BA\u7279\u6027\u95DC\u4FC2\uFF0C\u7121\u6CD5\u89F8\u767C\u76E3\u807D\u5668\u3002++</li></ul><h4 id="immediate" tabindex="-1"><a class="header-anchor" href="#immediate" aria-hidden="true">#</a> immediate</h4><ul><li><strong>\u76E3\u807D\u5668\u9810\u8A2D\u70BA++\u7576\u503C\u6709\u6240\u8B8A\u5316\u6642\u624D\u6703\u89F8\u767C++\u3002</strong> \u5982\u679C\u6211\u5011\u5E0C\u671B\u5728\u521D\u59CB\u5316\u5B8C\u6210\u5F8C\uFF0C\u5C31\u5148\u89F8\u767C\uFF0C\u57F7\u884C handler\uFF0C \u5C31\u53EF\u4EE5\u5C07 immediate \u503C\u8A2D\u70BA true\u3002</li></ul><h3 id="\u7D44\u4EF6\u91CD\u65B0\u6E32\u67D3" tabindex="-1"><a class="header-anchor" href="#\u7D44\u4EF6\u91CD\u65B0\u6E32\u67D3" aria-hidden="true">#</a> \u7D44\u4EF6\u91CD\u65B0\u6E32\u67D3</h3><ul><li>\u65B9\u6CD51\uFF1A\u53EA\u9700\u70BA\u7D44\u4EF6\u8A2D\u7F6E\u4E00\u500B<strong>key</strong>, \u9700\u8981\u91CD\u65B0\u9078\u67D3\u6642\u66F4\u65B0key\u5373\u53EF\u3002</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>component<span class="token operator">-</span>to<span class="token operator">-</span>re<span class="token operator">-</span>render <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;componentKey&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">componentKey</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">forceRerender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>componentKey <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// check update</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;view updated&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>\u65B9\u6CD52 \u7D44\u5EFA\u4E0A\u8A2D\u7F6E\u4E00\u500Bv-if \u5F37\u5236\u5237\u65B0\u5373\u53EF\u3002</li></ul><h3 id="vue-cli" tabindex="-1"><a class="header-anchor" href="#vue-cli" aria-hidden="true">#</a> Vue-cli</h3><ul><li>\u60F3\u8A2D\u7F6E\u74B0\u5883\u8B8A\u6578\u6642</li></ul><blockquote><p>\u5148\u5275\u5EFA\u4E00\u500B<code>.env</code></p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">VUE_APP_API</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">yourApiBaseUrl</span><span class="token template-punctuation string">\`</span></span>
<span class="token constant">VUE_APP_CDN</span> <span class="token operator">=</span> assets<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8ABF\u7528\u65B9 \u8ABF\u7528\u65B9\u6CD5\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token literal-property property">baseUrl</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cdn</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_CDN</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\u60F3\u4F7F\u7528\u5168\u5C40mixin\u6642</li></ul><blockquote><p>\u5148\u5275\u5EFA\u4E00\u500B<code>vue.config.js</code></p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loaderOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">prependData</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
          @import &quot;~@/styles/_mixin.scss&quot;;
        </span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="\u52D5\u614B\u9EB5\u5305\u524A\u5C0E\u822A" tabindex="-1"><a class="header-anchor" href="#\u52D5\u614B\u9EB5\u5305\u524A\u5C0E\u822A" aria-hidden="true">#</a> \u52D5\u614B\u9EB5\u5305\u524A\u5C0E\u822A</h3>`,21),h={href:"https://www.codenong.com/cs106985487/",target:"_blank",rel:"noopener noreferrer"},g=s("\u52D5\u614B\u9EB5\u5305\u524A\u5C0E\u822A"),v={id:"\u4F7F\u7528-set-\u65B0\u589E\u5BE6\u9AD4\u4E2D\u7684\u5C6C\u6027",tabindex:"-1"},f=n("a",{class:"header-anchor",href:"#\u4F7F\u7528-set-\u65B0\u589E\u5BE6\u9AD4\u4E2D\u7684\u5C6C\u6027","aria-hidden":"true"},"#",-1),y=s(),_={href:"https://ithelp.ithome.com.tw/articles/10206422",target:"_blank",rel:"noopener noreferrer"},j=s("\u4F7F\u7528 "),w=n("code",null,"set",-1),x=s(" \u65B0\u589E\u5BE6\u9AD4\u4E2D\u7684\u5C6C\u6027"),E=t(`<blockquote><p>\u91DD\u5C0D\u5C0D\u539F\u672C\u4E0D\u5B58\u5728\u7684<code>$set</code>\uFF0C\u65B0\u589E\u591A\u5C6C\u6027\u7528<code>Object.assign</code>\uFF0A</p></blockquote><h3 id="\u5E38\u7528\u5716\u7247component\u914D\u88FD\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u5716\u7247component\u914D\u88FD\u65B9\u6CD5" aria-hidden="true">#</a> \u5E38\u7528\u5716\u7247component\u914D\u88FD\u65B9\u6CD5</h3><ul><li>cdnImg</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>img <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;baseUrl + cdn + src&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>backgroundImg</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>div 
  <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;background-img&quot;</span> 
  <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ backgroundImage: &#39;url(&#39; + baseUrl + cdn + src + &#39;)&#39; }&quot;</span>
<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="\u932F\u8AA4\u5168\u5C40\u6355\u6349-\u653E\u5728main-js" tabindex="-1"><a class="header-anchor" href="#\u932F\u8AA4\u5168\u5C40\u6355\u6349-\u653E\u5728main-js" aria-hidden="true">#</a> \u932F\u8AA4\u5168\u5C40\u6355\u6349(\u653E\u5728main.js)</h3><ul><li>vue error catch</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">errorHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> dispatch <span class="token punctuation">}</span> <span class="token operator">=</span> vm<span class="token punctuation">.</span>$store<span class="token punctuation">;</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;updateErrMsgModal&#39;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// vuex\u4E2D\u5B9A\u7FA9\u7684\u932F\u8AA4\u6355\u6349\u5F48\u7A97\u958B\u555F\u65B9\u6CD5</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;updateErrMsg&#39;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// vuex\u4E2D\u5B9A\u7FA9\u7684\u66F4\u65B0\u932F\u8AA4\u6355\u6349\u5F48\u7A97\u5167\u5BB9\u65B9\u6CD5</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>global error catch</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> dispatch <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">.</span>$store<span class="token punctuation">;</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;updateErrMsgModal&#39;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;updateErrMsg&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>promise error carch</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;unhandledrejection&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> dispatch <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">.</span>$store<span class="token punctuation">;</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;updateErrMsgModal&#39;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;updateErrMsg&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// throw Error(&#39;Error in pure js&#39;);</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="\u8DEF\u7531\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u8DEF\u7531\u914D\u7F6E" aria-hidden="true">#</a> \u8DEF\u7531\u914D\u7F6E</h3><ul><li>\u6700\u4E0A\u65B9\u8A18\u5F97\u52A0</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> originalPush <span class="token operator">=</span> <span class="token class-name">VueRouter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push
  <span class="token class-name">VueRouter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">location</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">originalPush</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>\u57FA\u672C\u6B77\u53F2\u6A21\u5F0F</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;history&#39;</span><span class="token punctuation">,</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>\u5982\u679C\u8981\u505A\u767B\u9304\u9A57\u8B49</li></ul>`,19),q=n("p",null,"\u53EF\u53C3\u8003",-1),V={href:"https://www.jianshu.com/p/4c8358f73e03",target:"_blank",rel:"noopener noreferrer"},A=s("\u7528 vue-route \u7684 beforeEach \u5B9E\u73B0\u5BFC\u822A\u5B88\u536B"),I={href:"https://blog.csdn.net/latency_cheng/article/details/78580161",target:"_blank",rel:"noopener noreferrer"},L=s("Vue\u9879\u76EE\u4E2D\u5B9E\u73B0\u7528\u6237\u767B\u5F55\u53CAtoken\u9A8C\u8BC1(\u914D\u5408vuex)"),$=t(`<ul><li>\u5728<code>login.vue</code>\u7684<code>methods</code>\u88E1</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> account <span class="token operator">=</span> vm<span class="token punctuation">.</span>loginFrom<span class="token punctuation">.</span>account<span class="token punctuation">;</span>
  <span class="token keyword">const</span> password <span class="token operator">=</span> vm<span class="token punctuation">.</span>loginFrom<span class="token punctuation">.</span>password<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> account <span class="token operator">==</span> <span class="token string">&#39;abcd&#39;</span> <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> <span class="token string">&#39;1234&#39;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;\u6703\u54E1\u767B\u5165\u6210\u529F!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ImLogin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vm<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;\u5E33\u865F\u6216\u5BC6\u78BC\u8F38\u5165\u932F\u8AA4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//el-ui</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>\u5728<code>main.js</code>\u88E1</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">&#39;Authorization&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>\u5728<code>router.js</code>\u88E1export router\u524D\u52A0</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isLogin <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&#39;ImLogin&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">&#39;Login&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Login&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>\u7372\u53D6\u7576\u524D\u8DEF\u7531(\u5728app.vue)</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">$route</span><span class="token punctuation">(</span><span class="token parameter">nV</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//\u4F7F\u7528vuex \u65B9\u6CD5\u6539\u8B8A\u5B58\u653E\u8B8A\u6578</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNowRoute</span><span class="token punctuation">(</span>nV<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(this.$store.state.nowRoute);</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div>`,8);function M(P,B){const a=e("ExternalLinkIcon");return o(),c(l,null,[i,n("ul",null,[n("li",null,[n("a",k,[d,p(a)]),b])]),m,n("p",null,[n("a",h,[g,p(a)])]),n("h3",v,[f,y,n("a",_,[j,w,x,p(a)])]),E,n("blockquote",null,[q,n("ul",null,[n("li",null,[n("a",V,[A,p(a)])]),n("li",null,[n("a",I,[L,p(a)])])])]),$],64)}var N=r(u,[["render",M]]);export{N as default};
